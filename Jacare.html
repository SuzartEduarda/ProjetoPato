<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz do Jacar√©</title>
<style>
body {
  background: #7d84e0;
  font-family: "Poppins", sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  transition: background-color 0.3s ease;
}
.acerto { background-color: #58c472 !important; transition: background-color 0.3s ease; }
.erro { background-color: #e65656 !important; transition: background-color 0.3s ease; }

.quiz-container {
  text-align: center;
  background: #ffffff;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  width: 90%;
  max-width: 400px;
  position: relative;
}
h1 { color: #045db5; font-size: 1.6rem; margin-bottom: 20px; }

.animal-image { display: flex; justify-content: center; align-items: center; margin: 15px 0; }
.animal-image img { width: 150px; height: auto; border-radius: 12px; }

.options { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px; }

.option {
  border: none; border-radius: 12px; padding: 15px; font-size: 1rem; font-weight: bold;
  color: white; cursor: pointer; transition: 0.3s;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  min-height: 80px; position: relative;
}
.option:hover { transform: scale(1.05); }
.option[data-resposta="Sim"] { background-color: #58c472 !important; }
.option[data-resposta="N√£o"] { background-color: #e65656 !important; }
.option[data-resposta="Maior"] { background-color: #8c6bdb !important; }
.option[data-resposta="Menor"] { background-color: #fed330 !important; }
.option[data-resposta="Verde"] { background-color: #58c472 !important; }

.option-com-imagem { padding: 0 !important; background: transparent !important; border: 2px solid #ddd; overflow: hidden; }
.option-image-full { width: 100%; height: 80px; object-fit: cover; border-radius: 10px; }
.image-text-overlay {
  position: absolute; bottom: 0; left: 0; right: 0;
  color: green; padding: 5px; font-size: 0.8rem; font-weight: bold; text-align: center;
}
.option-text-only { text-align: center; font-weight: bold; width: 100%; }

#feedback { font-weight: bold; margin-top: 20px; font-size: 1.2rem; }

.back-button {
  background: #7d84e0; color: white; border: none; padding: 12px 24px;
  border-radius: 30px; font-weight: bold; cursor: pointer;
  margin-top: 15px; transition: 0.3s; width: 100%; max-width: 200px;
}
.back-button:hover { background: #6a71c9; transform: scale(1.05); }

.extra-options { display: flex; flex-direction: column; gap: 10px; margin-top: 15px; }
.extra-option {
  background: #8c6bdb; color: white; border: none; border-radius: 12px;
  padding: 12px; font-size: 0.9rem; cursor: pointer; transition: 0.3s;
}
.extra-option:hover { background: #7a5ac9; transform: scale(1.03); }

.back-question-button {
  position: absolute; top: 20px; left: 20px; background: #7d84e0; color: white;
  border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 1.2rem;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
.back-question-button:hover { transform: scale(1.1); }

.hidden { display: none; }
.disabled { pointer-events: none; opacity: 0.6; }
</style>
</head>
<body>
<div class="quiz-container">
  <button class="back-question-button hidden" id="back-question-button" onclick="voltarPerguntaAnterior()">‚Üê</button>
  <h1 id="question">Carregando...</h1>
  <div class="animal-image"><img id="animal-img" src="" alt="Animal"></div>
  <div class="options" id="options-container"></div>

  <div class="extra-options hidden" id="extra-options">
    <button class="extra-option" onclick="voltarParaTelaInicial()">Voltar para Tela Inicial</button>
    <button class="extra-option" onclick="verOutroAnimal()">Quer ver outro animal?</button>
  </div>

  <p id="feedback"></p>
  <button class="back-button hidden" id="back-button" onclick="voltarParaTelaInicial()">‚Üê Voltar para Tela Inicial</button>
</div>

<script>
const perguntas = [
  {
    texto: "Oi! Vamos brincar de adivinhar?",
    imagem: null,
    opcoes: [{ texto: "Sim" }, { texto: "N√£o" }],
    correta: "Sim",
    primeiraPergunta: true,
    aceitaQualquerResposta: true
  },
  {
    texto: "Que animal √© esse??",
    imagem: "imgs/Jacare.png",
    opcoes: [
      { texto: "Jacar√©", imagem: "imgs/JacarePerfil.png", cor: "imagem" },
      { texto: "T-rex", imagem: "imgs/t-rex.png", cor: "imagem" },
      { texto: "Lagartixa", imagem: "imgs/Lagartixa.png", cor: "imagem" },
      { texto: "Tartaruga", imagem: "imgs/Tartaruga.png", cor: "imagem" }
    ],
    correta: "Jacar√©", verificarPalavraChave: true, palavrasChave: ["jacar√©", "alligator"]
  },
  {
    texto: "Muito bem! √â um Jacar√©! Ele √© maior ou menor do que uma formiga?",
    imagem: "imgs/Jacamiga.png",
    opcoes: [{ texto: "Maior" }, { texto: "Menor" }],
    correta: "Maior", verificarPalavraChave: true, palavrasChave: ["maior", "grande", "bigger", "big"]
  },
  {
    texto: "Isso mesmo! O jacar√© √© beeem maior do que uma formiga! E que cor ele tem?",
    imagem: "imgs/Jacare.png",
    opcoes: [
      { texto: "Verde", imagem: "imgs/cor_verde.jpg", cor: "imagem" },
      { texto: "Marrom", imagem: "imgs/cor_marrom.png", cor: "imagem" },
      { texto: "Cinza", imagem: "imgs/cor_cinza.jpg", cor: "imagem" },
      { texto: "Preto", imagem: "imgs/cor_preto.png", cor: "imagem" }
    ],
    correta: "Verde", verificarPalavraChave: true, palavrasChave: ["verde", "green"]
  },
  {
    texto: "Que legal! Adoro jacar√©s! Quer me mostrar outro animal?",
    imagem: "imgs/Jacare.png",
    opcoes: [{ texto: "Sim" }, { texto: "N√£o" }],
    correta: "Sim",
    respostaEspecial: true
  }
];

let indice = 0;
let tentativaNao = 0;

const perguntaEl = document.getElementById("question");
const imagemEl = document.getElementById("animal-img");
const opcoesContainer = document.getElementById("options-container");
const feedbackEl = document.getElementById("feedback");
const extraOptions = document.getElementById("extra-options");
const backButton = document.getElementById("back-button");
const backQuestionButton = document.getElementById("back-question-button");

function mudarCorFundo(cor) {
  document.body.classList.add(cor);
  document.querySelectorAll('.option').forEach(btn => btn.classList.add('disabled'));
}

function restaurarCorFundo() {
  document.body.classList.remove('acerto', 'erro');
  document.querySelectorAll('.option').forEach(btn => btn.classList.remove('disabled'));
}

function verificarPalavraChave(resposta, palavrasChave) {
  const respostaLower = resposta.toLowerCase();
  return palavrasChave.some(palavra => respostaLower.includes(palavra.toLowerCase()));
}

function carregarPergunta() {
  const atual = perguntas[indice];
  perguntaEl.textContent = atual.texto;
  feedbackEl.textContent = "";
  restaurarCorFundo();

  if (atual.imagem) { imagemEl.src = atual.imagem; imagemEl.style.display = "block"; }
  else { imagemEl.style.display = "none"; }

  if (atual.primeiraPergunta) extraOptions.classList.remove("hidden");
  else extraOptions.classList.add("hidden");

  if (indice >= 1) backQuestionButton.classList.remove("hidden");
  else backQuestionButton.classList.add("hidden");

  backButton.classList.add("hidden");
  opcoesContainer.innerHTML = "";

  atual.opcoes.forEach(opcao => {
    const botao = document.createElement("button");
    botao.classList.add("option");
    botao.setAttribute("data-resposta", opcao.texto);
    if (opcao.cor === "imagem") {
      botao.classList.add("option-com-imagem");
      const img = document.createElement("img");
      img.src = opcao.imagem;
      img.classList.add("option-image-full");
      botao.appendChild(img);
      const overlay = document.createElement("div");
      overlay.classList.add("image-text-overlay");
      overlay.textContent = opcao.texto;
      botao.appendChild(overlay);
    } else {
      const texto = document.createElement("span");
      texto.textContent = opcao.texto;
      texto.classList.add("option-text-only");
      botao.appendChild(texto);
    }
    botao.onclick = () => verificarResposta(opcao.texto);
    opcoesContainer.appendChild(botao);
  });
}

function voltarPerguntaAnterior() {
  if (indice > 0) { indice--; carregarPergunta(); }
}

function verificarResposta(opcaoSelecionada) {
  const atual = perguntas[indice];

  if (indice === 0 && opcaoSelecionada === "N√£o") {
    tentativaNao++;
    if (tentativaNao === 1) {
      feedbackEl.textContent = "Tudo bem! Vou te dar mais uma chance... üòä";
      opcoesContainer.innerHTML = "";
      setTimeout(() => { feedbackEl.textContent = ""; carregarPergunta(); }, 3000);
    } else {
      feedbackEl.textContent = "Tudo bem! Podemos brincar outra hora. üòä";
      opcoesContainer.innerHTML = "";
      extraOptions.classList.add("hidden");
      backButton.classList.remove("hidden");
    }
    return;
  }

  if (indice === 0 && atual.aceitaQualquerResposta) {
    mudarCorFundo('acerto');
    feedbackEl.textContent = "Que bom! Vamos come√ßar! ";
    setTimeout(() => { indice++; carregarPergunta(); }, 2000);
    return;
  }

  if (atual.verificarPalavraChave) {
    const correta = verificarPalavraChave(opcaoSelecionada, atual.palavrasChave);
    if (!correta) {
      mudarCorFundo('erro');
      feedbackEl.textContent = " Tente novamente!";
      setTimeout(() => { restaurarCorFundo(); feedbackEl.textContent = ""; }, 2000);
      return;
    }
    mudarCorFundo('acerto');
    feedbackEl.textContent = " Muito bem!";
  }

  if (atual.respostaEspecial) {
    if (opcaoSelecionada === "N√£o") {
      window.location.href = "Tela_Principal.html";
      return;
    } else if (opcaoSelecionada === "Sim") {
      mudarCorFundo('acerto');
      feedbackEl.textContent = " √ìtimo! Vamos ver outro animal...";
      setTimeout(() => { window.location.href = "outra_op.html"; }, 3000);
      return;
    }
  }

  setTimeout(() => {
    indice++;
    if (indice < perguntas.length) carregarPergunta();
    else {
      perguntaEl.textContent = "Fim da brincadeira!";
      imagemEl.style.display = "none";
      opcoesContainer.innerHTML = "";
      feedbackEl.textContent = "Voc√™ arrasou!";
      backButton.classList.remove("hidden");
      backQuestionButton.classList.add("hidden");
    }
  }, 2000);
}

function voltarParaTelaInicial() {
  window.location.href = "Tela_Principal.html";
}
function verOutroAnimal() {
  window.location.href = "outra_op.html";
}

carregarPergunta();
</script>
</body>
</html>
